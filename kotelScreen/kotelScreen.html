<html>

<body style="background-color:powderblue;">

    <table border="1" style="margin: auto;">
        <tr>
            <td style="font-size: 1.2em;">

                <!-- Hebrew date libraries -->
                 <b><center>
                <!-- local copy because old tablet cannot fetch remote -->
                <!--script src="https://www.hebcal.com/etc/hdate-he.js"--><script src="./libs/hdate-he.js"></script>
                <br>
                <!--script src="https://www.hebcal.com/etc/hdate-en.js"--><script src="libs/hdate-en.js"></script>
                </b>

                <br>

                <!-- Simple ES5-compatible time check -->
                <script>
                    var now = new Date();
                    var hours = now.getHours();
                    var minutes = now.getMinutes();
                    var decimalTime = hours + (minutes / 60);

                    if (decimalTime >= 20.0 && decimalTime < 24.0) {
                        document.write('fra i aften');
                    } else {
                        document.write('indtil i aften');
                    }
                </script>

                </center>

                <p>Powered by <a href="https://www.hebcal.com">Hebcal.com</a></p>

                <hr>

                <!-- Shabbat section -->
                <div id="hebcal-shabbat"></div>

                <script>
                    // Feature detection: use fetch if supported, otherwise XHR
                    var url = "www.hebcal.com/shabbat?cfg=i2&geonameid=294577&b=30&M=on&lg=s&tgt=_top";

                    if (window.fetch) {
                        // Modern browsers
                        fetch('https://' + url)
                            .then(function (response) { return response.text(); })
                            .then(function (data) {
                                document.getElementById('hebcal-shabbat').innerHTML = data;
                            })
                            .catch(function (err) {
                                console.log("Fetch failed, falling back to XHR:", err);
                                loadWithXHR();
                            });
                    } else {
                        // Old browsers immediately use XHR
                        loadWithXHR();
                    }

                    function loadWithXHR() {
                        var xhr = new XMLHttpRequest();
                        xhr.open("GET", 'http://' + url, true); // Old browser does not like the signature used by the site anyway, so we have to go HTTP

                        xhr.onreadystatechange = function () {
                            if (xhr.readyState === 4 && xhr.status === 200) {
                                document.getElementById('hebcal-shabbat').innerHTML = xhr.responseText;
                            }
                        };

                        xhr.send();
                    }
                </script>
                <noscript>
                    <i>Det lykkedes ikke at indl√¶se en del af siden</i>
                </noscript>

            </td>

            <td>
                <!-- MyZmanim widget (unchanged) -->
                <script type="text/javascript" charset="UTF-8" language="javascript"
                    src="https://www.myzmanim.com/widget.aspx?lang=en&mode=Standard&fsize=13&fcolor=003BBE&hcolor=EBF1FF&bcolor=C0C0C0&suf=s&key=5z0sskm31T51cpL16ClOS5N%2bljoYc0NhWIVX0HIqaXQud3Df4SiB6gl4fuvpU2aBwmx5q2HhJW7UJ0ySTwt9yhhrtDACnWlyBbArESw%2b3x7eDgsijmwKQTPY32foKuz65zOngfVdoD2aL9qVlp6%2fs3z3KBHdXU9EFoDT15vA4SWF8ey9pXV9Gyi1yTriE4Px"></script>
                <noscript style="font-family:verdana;">Find your daily zmanim at <a
                        href="http://www.myzmanim.com/">MyZmanim.com</a>.</noscript>
            </td>

        </tr>
    </table>

<script>

    // Reload every 1 hour
    let reloadFreq_seconds = 60 * 60;

    setTimeout(function () {
        window.location.reload(true);
    }, reloadFreq_seconds * 1000);

    // Write at bottom of page about next reload
    var now = new Date();
    now.setHours(now.getHours() + reloadFreq_seconds/(60 * 60));
    var mins = now.getMinutes().toString().padStart(2, '0');  // padding: e.g. "7" -> "07"
    document.write("<i>Denne side opdateres klokken " + now.getHours() + ":" + mins + "</i>");

</script>

</body>

</html>